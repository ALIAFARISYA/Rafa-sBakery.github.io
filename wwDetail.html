<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whole Wheat Bread - Rafa's Bakery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="container header-content">
        <div class="header-top">
            <a href="Menu.html" class="logo">Rafa's<span> Bakery</span></a>
            <nav>
                <ul>
                    <li><a href="Menu.html"><i class="fas fa-utensils"></i> Menu</a></li>
                    <li><a href="AboutUs.html"><i class="fas fa-store"></i> About Us</a></li>
                    <li><a href="weddingCake.html"><i class="fas fa-shopping-bag"></i> Custom Cakes</a></li>
                    <li><a href="Contact.html"><i class="fas fa-phone"></i> Contact</a></li>
                </ul>
            </nav>
            
            <div class="header-icons">
                <a href="Cart.html" class="icon-link cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </a>
            </div>
        </div>
    </div>

    <!-- ===== BREADCRUMB ===== -->
    <div class="breadcrumb">
        <i class="fa fa-house"></i> 
        <a href="Homepage.html" class="breadcrumb-link">Home</a>
        &gt; Product Details
    </div>

    <!-- Product Detail Section -->
    <div class="product-detail-container">
        <a href="Menu.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to Menu
        </a>
        
        <div class="product-detail-wrapper">
            <!-- Product Image -->
            <div class="product-image-full">
                <img src="ww.png" alt="Whole Wheat Bread" id="productImage">
            </div>
            
            <!-- Product Info -->
            <div class="product-info-full">
                <h1 class="product-title-detail" id="productTitle">Whole Wheat Bread</h1>
                
                <!-- Price Display -->
                <div class="product-price-detail" id="productPriceDisplay">RM 30.00</div>
                
                <!-- Description -->
                <div class="calories-info">
                    <h4>Description</h4>
                    <p>Our signature Whole Wheat Bread is made from 100% whole wheat flour, packed with nutrients and fiber. Perfect for sandwiches, toast, or just plain enjoyment. Baked fresh daily with natural ingredients, no preservatives added.</p>
                </div>
                
                <!-- Nutrition Info -->
                <div class="calories-info">
                    <h4>Nutrition Information (per 100g)</h4>
                    <p id="caloriesInfo">• Calories: 247 kcal<br>• Carbohydrates: 41g<br>• Protein: 13g<br>• Fiber: 7g<br>• Fat: 3g<br>• Sugar: 4g</p>
                </div>
                
                <!-- Size Selection -->
                <div class="option-section">
                    <h3 class="option-title">Choose Size</h3>
                    <div class="size-options" id="sizeOptions">
                        <!-- Size options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Special Request -->
                <div class="option-section">
                    <h3 class="option-title">Special Requests (Optional)</h3>
                    <div class="greeting-card-option" id="specialRequestOption">
                        <input type="checkbox" id="specialRequestCheckbox">
                        <label for="specialRequestCheckbox">Slice the bread for me (+RM 2.00)</label>
                        <div class="greeting-card-price" id="specialRequestPrice">RM 2.00</div>
                    </div>
                </div>
                
                <!-- Personal Message -->
                <div class="option-section message-section">
                    <h3 class="option-title">Additional Notes (Optional)</h3>
                    <textarea class="message-input" id="personalMessage" 
                              placeholder="Any special instructions for your bread order... (Max 150 characters)"></textarea>
                    <div class="char-count" id="charCount">
                        <span id="remainingChars">150</span> characters remaining
                    </div>
                </div>
                
                <!-- Price Breakdown -->
                <div class="price-breakdown" id="priceBreakdown">
                    <div class="price-item">
                        <span>Bread Price:</span>
                        <span id="breadPrice">RM 30.00</span>
                    </div>
                    <div class="price-item">
                        <span>Slicing Service:</span>
                        <span id="specialRequestCost">RM 0.00</span>
                    </div>
                    <div class="price-item total">
                        <span>Total:</span>
                        <span id="totalPrice">RM 30.00</span>
                    </div>
                </div>
                
                <!-- Add to Cart Button -->
                <button class="add-to-cart-btn" id="addToCartBtn">
                    <span>Add To Cart</span>
                    <span id="finalPrice">RM 30.00</span>
                </button>
            </div>
        </div>
        
        <!-- Footer Section -->
        <div class="footer-section">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>Follow Us</h4>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h4>Help & Support</h4>
                    <ul>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Return Policy</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="Menu.html">Menu</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Order Online</a></li>
                        <li><a href="#">Catering</a></li>
                        <li><a href="#">Gift Cards</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Product data for Whole Wheat Bread
        const productData = {
            id: 2, // ID from Menu.html
            name: "Whole Wheat Bread",
            description: "100% whole wheat flour bread, rich in fiber and nutrients.",
            image: "ww.png",
            
            // Size options with different prices
            sizes: [
                { 
                    id: "small", 
                    name: "Small Loaf", 
                    price: 22.00,
                    weight: "500g",
                    servings: "8-10 slices",
                    dimensions: "6 inch",
                    default: false
                },
                { 
                    id: "medium", 
                    name: "Medium Loaf", 
                    price: 30.00,
                    weight: "750g",
                    servings: "12-15 slices",
                    dimensions: "8 inch",
                    default: true
                },
                { 
                    id: "large", 
                    name: "Large Loaf", 
                    price: 38.00,
                    weight: "1kg",
                    servings: "16-20 slices",
                    dimensions: "10 inch",
                    default: false
                }
            ],
            
            // Slicing service price
            slicingPrice: 2.00
        };
        
        // Global variables
        let selectedSize = null;
        let totalPrice = 0;
        let basePrice = 0;
        
        // DOM Elements
        const sizeOptionsContainer = document.getElementById('sizeOptions');
        const specialRequestOption = document.getElementById('specialRequestOption');
        const specialRequestCheckbox = document.getElementById('specialRequestCheckbox');
        const specialRequestPriceElement = document.getElementById('specialRequestPrice');
        const personalMessage = document.getElementById('personalMessage');
        const charCountElement = document.getElementById('charCount');
        const remainingCharsElement = document.getElementById('remainingChars');
        const addToCartBtn = document.getElementById('addToCartBtn');
        const finalPriceElement = document.getElementById('finalPrice');
        const productTitleElement = document.getElementById('productTitle');
        const productPriceDisplay = document.getElementById('productPriceDisplay');
        const caloriesInfoElement = document.getElementById('caloriesInfo');
        const productImageElement = document.getElementById('productImage');
        
        // Price breakdown elements
        const breadPriceElement = document.getElementById('breadPrice');
        const specialRequestCostElement = document.getElementById('specialRequestCost');
        const totalPriceElement = document.getElementById('totalPrice');
        
        // Initialize function
        function initializeProductPage() {
            // Set product info
            productTitleElement.textContent = productData.name;
            productImageElement.src = productData.image;
            productImageElement.alt = productData.name;
            
            // Create size options
            createSizeOptions();
            
            // Set default size
            const defaultSize = productData.sizes.find(size => size.default) || productData.sizes[1];
            selectSize(defaultSize);
            
            // Initialize slicing service
            specialRequestPriceElement.textContent = `RM ${productData.slicingPrice.toFixed(2)}`;
            
            // Add event listeners
            setupEventListeners();
            
            // Initialize cart
            updateCartCount();
        }
        
        // Create size options dynamically
        function createSizeOptions() {
            sizeOptionsContainer.innerHTML = '';
            
            productData.sizes.forEach(size => {
                const sizeOption = document.createElement('div');
                sizeOption.className = 'size-option';
                sizeOption.dataset.sizeId = size.id;
                sizeOption.dataset.price = size.price;
                
                sizeOption.innerHTML = `
                    <div class="size-label">${size.name}</div>
                    <div class="size-price">RM ${size.price.toFixed(2)}</div>
                    <div class="size-details">${size.weight}<br>${size.servings}</div>
                `;
                
                sizeOption.addEventListener('click', () => selectSize(size));
                sizeOptionsContainer.appendChild(sizeOption);
            });
        }
        
        // Select a size
        function selectSize(size) {
            // Remove selected class from all options
            document.querySelectorAll('.size-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            const selectedOption = document.querySelector(`[data-size-id="${size.id}"]`);
            selectedOption.classList.add('selected');
            
            // Update selected size
            selectedSize = size;
            basePrice = size.price;
            
            // Update price display
            updatePriceDisplay();
        }
        
        // Update price display
        function updatePriceDisplay() {
            if (!selectedSize) return;
            
            // Calculate slicing service cost
            const slicingCost = specialRequestCheckbox.checked ? productData.slicingPrice : 0;
            
            // Calculate total
            totalPrice = basePrice + slicingCost;
            
            // Update price display elements
            productPriceDisplay.textContent = `RM ${selectedSize.price.toFixed(2)}`;
            breadPriceElement.textContent = `RM ${selectedSize.price.toFixed(2)}`;
            specialRequestCostElement.textContent = `RM ${slicingCost.toFixed(2)}`;
            totalPriceElement.textContent = `RM ${totalPrice.toFixed(2)}`;
            finalPriceElement.textContent = `RM ${totalPrice.toFixed(2)}`;
            
            // Update special request option style
            if (specialRequestCheckbox.checked) {
                specialRequestOption.classList.add('selected');
            } else {
                specialRequestOption.classList.remove('selected');
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Slicing service checkbox
            specialRequestCheckbox.addEventListener('change', updatePriceDisplay);
            
            // Special request option click (whole div is clickable)
            specialRequestOption.addEventListener('click', (e) => {
                if (e.target !== specialRequestCheckbox) {
                    specialRequestCheckbox.checked = !specialRequestCheckbox.checked;
                    updatePriceDisplay();
                }
            });
            
            // Message character counter
            personalMessage.addEventListener('input', updateCharacterCount);
            
            // Add to cart button
            addToCartBtn.addEventListener('click', addToCart);
        }
        
        // Update character count for message
        function updateCharacterCount() {
            const maxChars = 150;
            const currentChars = personalMessage.value.length;
            const remaining = maxChars - currentChars;
            
            remainingCharsElement.textContent = remaining;
            
            // Update styling based on remaining characters
            charCountElement.className = 'char-count';
            if (remaining < 0) {
                charCountElement.classList.add('error');
                // Truncate the text
                personalMessage.value = personalMessage.value.substring(0, maxChars);
                remainingCharsElement.textContent = 0;
            } else if (remaining < 30) {
                charCountElement.classList.add('warning');
            }
        }
        
        // Add to cart function
        function addToCart() {
            if (!selectedSize) {
                alert('Please select a size first!');
                return;
            }
            
            // Create cart item
            const cartItem = {
                productId: productData.id,
                name: productData.name,
                size: selectedSize.name,
                sizeId: selectedSize.id,
                price: totalPrice,
                basePrice: basePrice,
                slicingService: specialRequestCheckbox.checked,
                slicingPrice: specialRequestCheckbox.checked ? productData.slicingPrice : 0,
                message: personalMessage.value,
                image: productData.image,
                weight: selectedSize.weight,
                servings: selectedSize.servings,
                cartId: Date.now() + Math.random().toString(36).substr(2, 9),
                addedAt: new Date().toISOString()
            };
            
            // Get existing cart
            let cart = JSON.parse(localStorage.getItem('rafasBakeryCart')) || [];
            
            // Add new item to cart
            cart.push(cartItem);
            
            // Save to localStorage
            localStorage.setItem('rafasBakeryCart', JSON.stringify(cart));
            
            // Update cart count
            updateCartCount();
            
            // Show notification
            showCartNotification(cartItem.name, selectedSize.name);
        }
        
        // Update cart count in navigation
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('rafasBakeryCart')) || [];
            const cartCountElements = document.querySelectorAll('.cart-count');
            cartCountElements.forEach(element => {
                element.textContent = cart.length;
            });
        }
        
        // Show cart notification
        function showCartNotification(productName, sizeName) {
            // Remove existing notification
            const existingNotification = document.querySelector('.cart-notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = 'cart-notification';
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-check-circle"></i>
                    <span>Added <strong>${productName} (${sizeName})</strong> to cart!</span>
                </div>
            `;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
        
        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeProductPage);

        const accountLink = document.getElementById("accountLink");

if (localStorage.getItem("isLoggedIn")) {
    accountLink.href = "MyAccount.html";
}
    </script>
</body>
</html>